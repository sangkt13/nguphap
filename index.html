<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IELTS GrammarLite</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4F46E5',   // Indigo 600
            secondary: '#10B981', // Emerald 500
            accent: '#F59E0B',    // Amber 500
          },
          fontFamily: { sans: ['Inter', 'sans-serif'] }
        }
      }
    }
  </script>

  <style>
    body { font-family: 'Inter', sans-serif; background-color: #F3F4F6; }
    .fade-in { animation: fadeIn 0.5s ease-in-out; }
    .slide-up { animation: slideUp 0.4s ease-out; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  </style>
</head>

<body class="text-gray-800 flex flex-col min-h-screen">
  <!-- Navbar -->
  <nav class="bg-white shadow-sm sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16 items-center">
        <div class="flex items-center cursor-pointer" onclick="app.goHome()">
          <div class="bg-primary text-white p-2 rounded-lg font-bold text-xl mr-2">IG</div>
          <span class="font-bold text-xl text-gray-900 tracking-tight">
            IELTS Grammar<span class="text-primary">Lite</span>
          </span>
        </div>

        <div class="hidden md:flex space-x-4 items-center">
          <a href="#" onclick="app.goHome()" class="text-gray-900 hover:text-primary transition px-3 py-2 rounded-md font-medium">Trang ch·ªß</a>
          <a href="#" onclick="app.openRoadmap()" class="text-gray-500 hover:text-primary transition px-3 py-2 rounded-md font-medium">L·ªô tr√¨nh</a>
          <a href="#" onclick="app.openStats()" class="text-gray-500 hover:text-primary transition px-3 py-2 rounded-md font-medium">Th·ªëng k√™</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main id="app-container" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full"></main>

  <!-- Footer -->
  <footer class="bg-white border-t mt-auto">
    <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
      <p class="text-center text-gray-500 text-sm">¬© 2026 IELTS GrammarLite. Learn grammar fast, use it immediately.</p>
    </div>
  </footer>

  <script>
    // =========================
    // DATA: MANY GRAMMAR TOPICS
    // =========================
    const topics = [
      // A1-A2 / Foundation
      {
        id: 1,
        title: "Th√¨ Hi·ªán T·∫°i ƒê∆°n (Present Simple)",
        level: "Foundation (A1‚ÄìA2) | IELTS 3.5‚Äì4.5",
        icon: "üïí",
        color: "bg-blue-100 text-blue-600",
        desc: "Th√≥i quen, s·ª± th·∫≠t hi·ªÉn nhi√™n, l·ªãch tr√¨nh.",
        theory: {
          summary: "S + V(s/es) / do/does + not + V",
          points: [
            "<strong>D√πng khi:</strong> th√≥i quen (every day), s·ª± th·∫≠t (Water boils at 100¬∞C).",
            "<strong>He/She/It:</strong> th√™m -s/-es (watch ‚Üí watches).",
            "<strong>Ph·ªß ƒë·ªãnh:</strong> do/does + not + V; <strong>H·ªèi:</strong> Do/Does + S + V?"
          ],
          example: "She <strong>works</strong> in a hospital. / <strong>Do</strong> you <strong>study</strong> every day?",
          tip: "üîë M·∫πo: Th·∫•y 'always/usually/often/sometimes' ‚Üí nghƒ© Present Simple."
        },
        quiz: [
          { question: "He ______ to work by bus every day.", options: ["go", "goes", "going", "gone"], correct: 1 },
          { question: "______ she like coffee?", options: ["Do", "Does", "Did", "Is"], correct: 1 }
        ]
      },
      {
        id: 2,
        title: "Th√¨ Hi·ªán T·∫°i Ti·∫øp Di·ªÖn (Present Continuous)",
        level: "Foundation (A2) | IELTS 4.0‚Äì5.0",
        icon: "üèÉ",
        color: "bg-cyan-100 text-cyan-700",
        desc: "H√†nh ƒë·ªông ƒëang x·∫£y ra ngay l√∫c n√≥i / xu h∆∞·ªõng hi·ªán t·∫°i.",
        theory: {
          summary: "S + am/is/are + V-ing",
          points: [
            "<strong>Now / right now / at the moment</strong> ‚Üí ƒëang di·ªÖn ra.",
            "<strong>Xu h∆∞·ªõng:</strong> People are using more AI in learning.",
            "<strong>Kh√¥ng d√πng</strong> cho stative verbs (know, believe, like...) trong ƒëa s·ªë tr∆∞·ªùng h·ª£p."
          ],
          example: "I <strong>am studying</strong> right now.",
          tip: "üîë M·∫πo: Th·∫•y 'now, currently, at the moment' ‚Üí Present Continuous."
        },
        quiz: [
          { question: "They ______ dinner at the moment.", options: ["cook", "cooks", "are cooking", "cooked"], correct: 2 },
          { question: "I ______ (not) understand this question now.", options: ["am not understanding", "don't understand", "isn't understand", "not understand"], correct: 1 }
        ]
      },
      {
        id: 3,
        title: "Th√¨ Qu√° Kh·ª© ƒê∆°n (Past Simple)",
        level: "Foundation (A2) | IELTS 4.0‚Äì5.0",
        icon: "‚åõ",
        color: "bg-amber-100 text-amber-700",
        desc: "H√†nh ƒë·ªông k·∫øt th√∫c trong qu√° kh·ª©, c√≥ m·ªëc th·ªùi gian r√µ.",
        theory: {
          summary: "S + V2/ed / did + not + V",
          points: [
            "<strong>Yesterday/last week/in 2020</strong> ‚Üí qu√° kh·ª© ƒë∆°n.",
            "<strong>Ph·ªß ƒë·ªãnh/h·ªèi:</strong> did + not + V / Did + S + V?",
            "<strong>Irregular verbs:</strong> go‚Üíwent, take‚Üítook..."
          ],
          example: "I <strong>went</strong> to Da Nang last year. / <strong>Did</strong> you <strong>see</strong> her?",
          tip: "üîë M·∫πo: C√≥ m·ªëc th·ªùi gian qu√° kh·ª© r√µ ‚Üí Past Simple."
        },
        quiz: [
          { question: "We ______ football yesterday.", options: ["play", "played", "playing", "plays"], correct: 1 },
          { question: "______ you visit Hue last summer?", options: ["Do", "Did", "Does", "Are"], correct: 1 }
        ]
      },

      // IELTS core
      {
        id: 4,
        title: "Th√¨ Hi·ªán T·∫°i Ho√†n Th√†nh (Present Perfect)",
        level: "IELTS 4.5‚Äì5.5",
        icon: "‚è≥",
        color: "bg-indigo-100 text-indigo-700",
        desc: "Tr·∫£i nghi·ªám, k·∫øt qu·∫£ ƒë·∫øn hi·ªán t·∫°i, h√†nh ƒë·ªông b·∫Øt ƒë·∫ßu qu√° kh·ª© k√©o d√†i ƒë·∫øn nay.",
        theory: {
          summary: "S + have/has + V3/ed",
          points: [
            "<strong>Since/for:</strong> b·∫Øt ƒë·∫ßu qu√° kh·ª© ‚Üí k√©o d√†i ƒë·∫øn hi·ªán t·∫°i.",
            "<strong>Already/yet/just:</strong> nh·∫•n m·∫°nh k·∫øt qu·∫£.",
            "<strong>Kh√¥ng r√µ th·ªùi gian</strong> trong qu√° kh·ª© (experience)."
          ],
          example: "I <strong>have lived</strong> in Hanoi for 5 years.",
          tip: "üîë Th·∫•y since/for/already/yet/just ‚Üí Present Perfect."
        },
        quiz: [
          { question: "I ______ my homework yet.", options: ["have finished", "haven't finished", "didn't finish", "not finish"], correct: 1 },
          { question: "She ______ in London since 2010.", options: ["lived", "has lived", "lives", "living"], correct: 1 }
        ]
      },
      {
        id: 5,
        title: "Th√¨ Qu√° Kh·ª© Ho√†n Th√†nh (Past Perfect)",
        level: "IELTS 5.5‚Äì6.5",
        icon: "‚èÆÔ∏è",
        color: "bg-slate-100 text-slate-700",
        desc: "H√†nh ƒë·ªông x·∫£y ra tr∆∞·ªõc m·ªôt m·ªëc/qu√° kh·ª© kh√°c.",
        theory: {
          summary: "S + had + V3/ed",
          points: [
            "D√πng khi c√≥ <strong>2 h√†nh ƒë·ªông qu√° kh·ª©</strong>, c√°i x·∫£y ra tr∆∞·ªõc d√πng Past Perfect.",
            "Th∆∞·ªùng ƒëi v·ªõi <strong>before/after/by the time</strong>.",
            "K·ªÉ chuy·ªán trong Writing/Speaking gi√∫p m·∫°ch th·ªùi gian r√µ."
          ],
          example: "By the time I arrived, the meeting <strong>had started</strong>.",
          tip: "üîë M·∫πo: 2 s·ª± ki·ªán qu√° kh·ª© ‚Üí c√°i tr∆∞·ªõc d√πng had + V3."
        },
        quiz: [
          { question: "She ______ (finish) her work before she went home.", options: ["has finished", "had finished", "finished", "finishes"], correct: 1 },
          { question: "By the time we got there, the movie ______.", options: ["started", "had started", "has started", "starts"], correct: 1 }
        ]
      },
      {
        id: 6,
        title: "C√¢u B·ªã ƒê·ªông (Passive Voice)",
        level: "IELTS 5.5‚Äì6.5",
        icon: "üîÑ",
        color: "bg-purple-100 text-purple-700",
        desc: "Nh·∫•n m·∫°nh h√†nh ƒë·ªông/ƒë·ªëi t∆∞·ª£ng b·ªã t√°c ƒë·ªông; c·ª±c hay d√πng trong Task 1 Process.",
        theory: {
          summary: "Object + be + V3 (+ by S)",
          points: [
            "<strong>Hi·ªán t·∫°i ƒë∆°n:</strong> am/is/are + V3.",
            "<strong>Qu√° kh·ª© ƒë∆°n:</strong> was/were + V3.",
            "<strong>Hi·ªán t·∫°i ti·∫øp di·ªÖn:</strong> am/is/are being + V3."
          ],
          example: "The report <strong>was written</strong> by John.",
          tip: "üîë Task 1 Process: ∆∞u ti√™n b·ªã ƒë·ªông ƒë·ªÉ m√¥ t·∫£ quy tr√¨nh."
        },
        quiz: [
          { question: "The house ______ by fire.", options: ["destroy", "was destroyed", "destroyed", "destroying"], correct: 1 },
          { question: "A new bridge ______ built across the river right now.", options: ["is", "is being", "was", "has been"], correct: 1 }
        ]
      },
      {
        id: 7,
        title: "M·ªánh ƒê·ªÅ Quan H·ªá (Relative Clauses)",
        level: "IELTS 6.0+",
        icon: "üîó",
        color: "bg-green-100 text-green-700",
        desc: "N·ªëi c√¢u, tƒÉng ƒë·ªô ph·ª©c t·∫°p v√† m·∫°ch l·∫°c trong Speaking/Writing.",
        theory: {
          summary: "who/which/that/whose (+ clause)",
          points: [
            "<strong>who:</strong> ng∆∞·ªùi | <strong>which:</strong> v·∫≠t | <strong>whose:</strong> s·ªü h·ªØu.",
            "<strong>Defining</strong> (kh√¥ng c√≥ d·∫•u ph·∫©y) vs <strong>Non-defining</strong> (c√≥ d·∫•u ph·∫©y).",
            "C√≥ th·ªÉ <strong>l∆∞·ª£c b·ªè</strong> ƒë·∫°i t·ª´ quan h·ªá khi n√≥ l√†m t√¢n ng·ªØ (The book (that) I bought...)."
          ],
          example: "The man <strong>who</strong> spoke to you is my teacher.",
          tip: "üîë M·∫πo: Relative clauses gi√∫p tƒÉng Grammatical Range."
        },
        quiz: [
          { question: "This is the book ______ I bought yesterday.", options: ["who", "where", "which", "whose"], correct: 2 },
          { question: "Do you know the girl ______ mother is a famous singer?", options: ["who", "whom", "whose", "that"], correct: 2 }
        ]
      },
      {
        id: 8,
        title: "C√¢u ƒêi·ªÅu Ki·ªán (Conditionals 0-1-2-3)",
        level: "IELTS 6.0+",
        icon: "üß†",
        color: "bg-rose-100 text-rose-700",
        desc: "N√≥i v·ªÅ s·ª± th·∫≠t, kh·∫£ nƒÉng, gi·∫£ ƒë·ªãnh, ho·∫∑c ƒëi·ªÅu ti·∫øc nu·ªëi trong qu√° kh·ª©.",
        theory: {
          summary: "If + clause, main clause (0/1/2/3)",
          points: [
            "<strong>Zero:</strong> If + Present, Present (s·ª± th·∫≠t).",
            "<strong>First:</strong> If + Present, will + V (kh·∫£ nƒÉng).",
            "<strong>Second:</strong> If + Past, would + V (gi·∫£ ƒë·ªãnh).",
            "<strong>Third:</strong> If + had + V3, would have + V3 (ti·∫øc nu·ªëi)."
          ],
          example: "If I <strong>had studied</strong>, I <strong>would have passed</strong>.",
          tip: "üîë M·∫πo: 'would have + V3' ‚Üí th∆∞·ªùng l√† Conditional 3."
        },
        quiz: [
          { question: "If it rains, we ______ at home.", options: ["stay", "will stay", "would stay", "stayed"], correct: 1 },
          { question: "If I ______ you, I would apologize.", options: ["am", "was", "were", "be"], correct: 2 }
        ]
      },
      {
        id: 9,
        title: "Modal Verbs (Can/Could/May/Might/Must/Should)",
        level: "IELTS 5.5‚Äì7.0",
        icon: "üéõÔ∏è",
        color: "bg-teal-100 text-teal-700",
        desc: "Di·ªÖn ƒë·∫°t kh·∫£ nƒÉng, l·ªùi khuy√™n, nghƒ©a v·ª•, suy ƒëo√°n.",
        theory: {
          summary: "Modal + V (bare infinitive)",
          points: [
            "<strong>Should</strong> = l·ªùi khuy√™n; <strong>must</strong> = b·∫Øt bu·ªôc.",
            "<strong>may/might</strong> = c√≥ th·ªÉ (kh·∫£ nƒÉng th·∫•p h∆°n).",
            "<strong>could</strong> = kh·∫£ nƒÉng/qu√° kh·ª©/ƒë·ªÅ ngh·ªã l·ªãch s·ª±."
          ],
          example: "You <strong>should</strong> sleep earlier. / It <strong>might</strong> rain.",
          tip: "üîë M·∫πo: Modal lu√¥n ƒëi v·ªõi V nguy√™n m·∫´u (kh√¥ng 'to')."
        },
        quiz: [
          { question: "You ______ wear a helmet when riding a motorbike.", options: ["might", "should", "could", "may"], correct: 1 },
          { question: "It ______ be true, but I'm not sure.", options: ["must", "might", "should", "will"], correct: 1 }
        ]
      },
      {
        id: 10,
        title: "Reported Speech (C√¢u gi√°n ti·∫øp)",
        level: "IELTS 6.0+",
        icon: "üó£Ô∏è",
        color: "bg-orange-100 text-orange-700",
        desc: "T∆∞·ªùng thu·∫≠t l·∫°i l·ªùi n√≥i/c√¢u h·ªèi.",
        theory: {
          summary: "S + said (that) + clause (backshift)",
          points: [
            "Th∆∞·ªùng <strong>l√πi th√¨</strong>: present ‚Üí past; will ‚Üí would; can ‚Üí could.",
            "<strong>Yes/No questions:</strong> asked if/whether + clause.",
            "<strong>Wh- questions:</strong> asked + wh-word + clause (kh√¥ng ƒë·∫£o tr·ª£ ƒë·ªông t·ª´)."
          ],
          example: 'He said, "I am tired." ‚Üí He said (that) he <strong>was</strong> tired.',
          tip: "üîë M·∫πo: C√¢u h·ªèi gi√°n ti·∫øp: kh√¥ng ƒë·∫£o 'do/does/did'."
        },
        quiz: [
          { question: 'She said she ______ busy.', options: ["is", "was", "were", "be"], correct: 1 },
          { question: 'He asked ______ I liked coffee.', options: ["that", "if", "to", "because"], correct: 1 }
        ]
      },
      {
        id: 11,
        title: "Gerunds & Infinitives (V-ing / To V)",
        level: "IELTS 5.5‚Äì7.0",
        icon: "üß©",
        color: "bg-lime-100 text-lime-700",
        desc: "Ch·ªçn ƒë√∫ng V-ing hay to V theo ƒë·ªông t·ª´/c·∫•u tr√∫c.",
        theory: {
          summary: "Enjoy + V-ing | Decide + to V | Stop + V-ing",
          points: [
            "<strong>V-ing</strong> sau: enjoy, avoid, mind, finish, suggest...",
            "<strong>to V</strong> sau: decide, want, plan, hope, need...",
            "<strong>Stop</strong>: stop smoking (d·ª´ng h√∫t) vs stop to smoke (d·ª´ng l·∫°i ƒë·ªÉ h√∫t)."
          ],
          example: "I enjoy <strong>reading</strong>. / I decided <strong>to study</strong> harder.",
          tip: "üîë M·∫πo: Luy·ªán theo c·ª•m ƒë·ªông t·ª´ c·ªë ƒë·ªãnh, kh√¥ng h·ªçc r·ªùi r·∫°c."
        },
        quiz: [
          { question: "I decided ______ abroad next year.", options: ["go", "to go", "going", "went"], correct: 1 },
          { question: "He suggested ______ earlier.", options: ["leave", "to leave", "leaving", "left"], correct: 2 }
        ]
      },
      {
        id: 12,
        title: "Articles (a/an/the/zero article)",
        level: "IELTS 5.0‚Äì7.0",
        icon: "üì∞",
        color: "bg-fuchsia-100 text-fuchsia-700",
        desc: "M·ªôt trong c√°c l·ªói ph·ªï bi·∫øn nh·∫•t c·ªßa ng∆∞·ªùi h·ªçc Vi·ªát Nam.",
        theory: {
          summary: "a/an = l·∫ßn ƒë·∫ßu/kh√¥ng x√°c ƒë·ªãnh | the = x√°c ƒë·ªãnh/ƒë√£ bi·∫øt",
          points: [
            "<strong>a/an</strong>: n√≥i chung, l·∫ßn ƒë·∫ßu nh·∫Øc, ngh·ªÅ nghi·ªáp (a doctor).",
            "<strong>the</strong>: v·∫≠t ƒë√£ bi·∫øt, duy nh·∫•t, c·ª• th·ªÉ (the sun, the book you gave me).",
            "<strong>Zero</strong>: danh t·ª´ s·ªë nhi·ªÅu chung chung / kh√¥ng ƒë·∫øm ƒë∆∞·ª£c (Books are useful. / Water is essential.)"
          ],
          example: "She is <strong>a</strong> teacher. The teacher I met yesterday was kind.",
          tip: "üîë M·∫πo: 'the' = ng∆∞·ªùi nghe bi·∫øt b·∫°n ƒëang n√≥i c√°i n√†o."
        },
        quiz: [
          { question: "I bought ______ book you recommended.", options: ["a", "an", "the", "√ò"], correct: 2 },
          { question: "______ water is necessary for life.", options: ["A", "An", "The", "√ò"], correct: 3 }
        ]
      }
    ];

    // =========================
    // APP
    // =========================
    const app = {
      container: document.getElementById('app-container'),

      init() { this.renderHome(); },

      goHome() { this.renderHome(); },

      openRoadmap() {
        this.container.innerHTML = `
          <div class="fade-in">
            <button onclick="app.goHome()" class="mb-6 flex items-center text-gray-500 hover:text-primary transition">
              <span class="mr-2">‚Üê</span> Quay l·∫°i
            </button>

            <div class="bg-white rounded-2xl shadow-xl p-6">
              <h2 class="text-2xl font-bold mb-3">L·ªô tr√¨nh g·ª£i √Ω</h2>
              <ol class="list-decimal list-inside space-y-2 text-gray-700">
                <li><strong>Foundation:</strong> Present Simple ‚Üí Present Continuous ‚Üí Past Simple</li>
                <li><strong>Core IELTS:</strong> Present Perfect ‚Üí Passive ‚Üí Relative Clauses</li>
                <li><strong>Band 6+:</strong> Conditionals ‚Üí Modals ‚Üí Reported Speech</li>
                <li><strong>Band 7:</strong> Gerunds/Infinitives ‚Üí Articles (polish) ‚Üí n√¢ng cao theo Writing/Speaking</li>
              </ol>
              <p class="mt-4 text-sm text-gray-500">B·∫°n c√≥ th·ªÉ d√πng n√∫t AI ·ªü m·ªói b√†i ƒë·ªÉ t·∫°o b√†i t·∫≠p m·ªõi theo ƒë√∫ng ƒëi·ªÉm ng·ªØ ph√°p.</p>
            </div>
          </div>
        `;
      },

      openStats() {
        // Simple stats from local quiz set (demo)
        const totalTopics = topics.length;
        const totalQuestions = topics.reduce((acc, t) => acc + (t.quiz?.length || 0), 0);
        this.container.innerHTML = `
          <div class="fade-in">
            <button onclick="app.goHome()" class="mb-6 flex items-center text-gray-500 hover:text-primary transition">
              <span class="mr-2">‚Üê</span> Quay l·∫°i
            </button>

            <div class="bg-white rounded-2xl shadow-xl p-6">
              <h2 class="text-2xl font-bold mb-4">Th·ªëng k√™</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="p-4 rounded-xl bg-gray-50 border">
                  <p class="text-sm text-gray-500">S·ªë ch·ªß ƒë·ªÅ</p>
                  <p class="text-3xl font-extrabold text-gray-900 mt-1">${totalTopics}</p>
                </div>
                <div class="p-4 rounded-xl bg-gray-50 border">
                  <p class="text-sm text-gray-500">T·ªïng s·ªë c√¢u hi·ªán c√≥</p>
                  <p class="text-3xl font-extrabold text-gray-900 mt-1">${totalQuestions}</p>
                </div>
              </div>
              <p class="mt-4 text-sm text-gray-500">Mu·ªën th·ªëng k√™ ƒëi·ªÉm theo user? Khi ƒë√≥ c·∫ßn l∆∞u d·ªØ li·ªáu (localStorage / database).</p>
            </div>
          </div>
        `;
      },

      renderHome() {
        let html = `
          <div class="text-center mb-12 fade-in">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4">
              H·ªçc <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600">Ng·ªØ ph√°p IELTS</span> nhanh
            </h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
              Nhi·ªÅu c·∫•u tr√∫c tr·ªçng ƒëi·ªÉm + b√†i t·∫≠p. B·∫•m <strong>AI</strong> ƒë·ªÉ t·∫°o b√†i t·∫≠p m·ªõi theo t·ª´ng ch·ªß ƒë·ªÅ.
            </p>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 slide-up">
        `;

        topics.forEach(topic => {
          html += `
            <div class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 cursor-pointer overflow-hidden border border-gray-100"
                 onclick="app.loadTopic(${topic.id})">
              <div class="p-6">
                <div class="flex justify-between items-start mb-4">
                  <div class="${topic.color} w-12 h-12 rounded-full flex items-center justify-center text-2xl">
                    ${topic.icon}
                  </div>
                  <span class="text-xs font-bold uppercase tracking-wide bg-gray-100 text-gray-600 px-2 py-1 rounded">${topic.level}</span>
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">${topic.title}</h3>
                <p class="text-gray-500 text-sm mb-4">${topic.desc}</p>
                <div class="w-full bg-gray-50 text-primary text-center py-2 rounded-lg font-medium hover:bg-primary hover:text-white transition">
                  B·∫Øt ƒë·∫ßu h·ªçc ‚Üí
                </div>
              </div>
            </div>
          `;
        });

        html += `</div>`;
        this.container.innerHTML = html;
      },

      loadTopic(id) {
        const topic = topics.find(t => t.id === id);
        if (!topic) return;

        const html = `
          <div class="fade-in">
            <button onclick="app.goHome()" class="mb-6 flex items-center text-gray-500 hover:text-primary transition">
              <span class="mr-2">‚Üê</span> Quay l·∫°i danh s√°ch
            </button>

            <div class="bg-white rounded-2xl shadow-xl overflow-hidden min-h-[520px]">
              <div class="md:flex h-full">
                <div class="md:w-1/3 bg-gray-50 p-6 border-r border-gray-100">
                  <h2 class="text-2xl font-bold text-gray-900 mb-2">${topic.title}</h2>
                  <p class="text-gray-500 text-sm mb-6">${topic.desc}</p>

                  <div class="space-y-2">
                    <button id="btn-theory" onclick="app.switchTab('theory', ${topic.id})"
                      class="w-full text-left px-4 py-3 rounded-lg font-medium bg-white shadow-sm border border-gray-200 text-primary">
                      üìñ L√Ω thuy·∫øt c·ªët l√µi
                    </button>

                    <button id="btn-practice" onclick="app.switchTab('practice', ${topic.id})"
                      class="w-full text-left px-4 py-3 rounded-lg font-medium text-gray-600 hover:bg-white hover:shadow-sm transition">
                      ‚úçÔ∏è B√†i t·∫≠p th·ª±c h√†nh
                    </button>
                  </div>

                  <div class="mt-6 p-4 rounded-xl bg-white border">
                    <p class="text-sm text-gray-500 mb-2">G·ª£i √Ω h·ªçc nhanh</p>
                    <p class="text-sm text-gray-700">H·ªçc <strong>c√¥ng th·ª©c</strong> ‚Üí ƒë·ªçc <strong>c√°ch d√πng</strong> ‚Üí l√†m 2 c√¢u ‚Üí b·∫•m <strong>AI</strong> t·∫°o th√™m 5 c√¢u.</p>
                  </div>
                </div>

                <div class="md:w-2/3 p-8" id="content-area"></div>
              </div>
            </div>
          </div>
        `;

        this.container.innerHTML = html;
        this.switchTab('theory', id);
      },

      switchTab(tabName, topicId) {
        const topic = topics.find(t => t.id === topicId);
        const contentArea = document.getElementById('content-area');
        const btnTheory = document.getElementById('btn-theory');
        const btnPractice = document.getElementById('btn-practice');

        if (tabName === 'theory') {
          btnTheory.className = "w-full text-left px-4 py-3 rounded-lg font-medium bg-white shadow-sm border border-gray-200 text-primary ring-1 ring-primary/20";
          btnPractice.className = "w-full text-left px-4 py-3 rounded-lg font-medium text-gray-600 hover:bg-white hover:shadow-sm transition";

          contentArea.innerHTML = `
            <div class="fade-in space-y-6">
              <div class="bg-indigo-50 border-l-4 border-primary p-4 rounded-r-lg">
                <h3 class="text-lg font-bold text-primary mb-1">C√¥ng th·ª©c chung</h3>
                <p class="text-2xl font-mono text-gray-800">${topic.theory.summary}</p>
              </div>

              <div>
                <h3 class="text-xl font-bold text-gray-900 mb-3">C√°ch s·ª≠ d·ª•ng</h3>
                <ul class="list-disc list-inside space-y-2 text-gray-700 leading-relaxed">
                  ${topic.theory.points.map(point => `<li>${point}</li>`).join('')}
                </ul>
              </div>

              <div class="bg-gray-100 p-4 rounded-lg">
                <h3 class="font-bold text-gray-900">V√≠ d·ª• minh h·ªça:</h3>
                <p class="text-gray-700 italic mt-1">"${topic.theory.example}"</p>
              </div>

              <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg flex items-start">
                <span class="text-2xl mr-3">üí°</span>
                <p class="text-yellow-800 text-sm pt-1">${topic.theory.tip}</p>
              </div>
            </div>
          `;
        } else {
          btnPractice.className = "w-full text-left px-4 py-3 rounded-lg font-medium bg-white shadow-sm border border-gray-200 text-secondary ring-1 ring-secondary/20";
          btnTheory.className = "w-full text-left px-4 py-3 rounded-lg font-medium text-gray-600 hover:bg-white hover:shadow-sm transition";

          let quizHtml = `
            <div class="fade-in">
              <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-6">
                <h3 class="text-xl font-bold text-gray-900">B√†i t·∫≠p v·∫≠n d·ª•ng</h3>

                <button type="button"
                  onclick="app.generateAIQuiz(${topic.id})"
                  class="bg-primary hover:bg-indigo-700 text-white font-bold py-2.5 px-5 rounded-lg transition shadow">
                  ‚ú® T·∫°o b√†i t·∫≠p b·∫±ng AI
                </button>
              </div>

              <div id="ai-status" class="hidden mb-4 p-3 rounded-lg text-sm"></div>

              <form id="quiz-form">
          `;

          topic.quiz.forEach((q, index) => {
            quizHtml += `
              <div class="mb-6 p-4 border rounded-lg bg-gray-50">
                <p class="font-semibold text-gray-800 mb-3">C√¢u ${index + 1}: ${q.question}</p>
                <div class="space-y-2">
            `;

            q.options.forEach((opt, optIndex) => {
              quizHtml += `
                <label class="flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-white transition">
                  <input type="radio" name="q${index}" value="${optIndex}" class="form-radio text-primary h-4 w-4">
                  <span class="text-gray-700">${opt}</span>
                </label>
              `;
            });

            quizHtml += `</div></div>`;
          });

          quizHtml += `
              <div id="result-area" class="hidden mb-4 p-4 rounded-lg"></div>

              <button type="button" onclick="app.checkAnswers(${topic.id})"
                class="w-full md:w-auto bg-secondary hover:bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg transition shadow-lg transform hover:scale-105">
                Ki·ªÉm tra ƒë√°p √°n
              </button>
            </form>
          </div>
          `;

          contentArea.innerHTML = quizHtml;
        }
      },

      checkAnswers(topicId) {
        const topic = topics.find(t => t.id === topicId);
        let score = 0;
        const total = topic.quiz.length;
        const form = document.getElementById('quiz-form');

        topic.quiz.forEach((q, index) => {
          const selected = form.querySelector(`input[name="q${index}"]:checked`);
          const container = form.querySelectorAll('.mb-6')[index];

          // reset
          container.classList.remove('bg-green-50', 'bg-red-50', 'border-green-300', 'border-red-300');
          const icon = container.querySelector('.result-icon');
          if (icon) icon.remove();

          if (selected && parseInt(selected.value) === q.correct) {
            score++;
            container.classList.add('bg-green-50', 'border-green-300', 'border');
            container.insertAdjacentHTML('beforeend', '<p class="text-green-600 font-bold mt-2 text-sm result-icon">‚úì Ch√≠nh x√°c</p>');
          } else {
            container.classList.add('bg-red-50', 'border-red-300', 'border');
            container.insertAdjacentHTML('beforeend', `<p class="text-red-500 font-bold mt-2 text-sm result-icon">‚úó Sai r·ªìi. ƒê√°p √°n ƒë√∫ng: ${q.options[q.correct]}</p>`);
          }
        });

        const resultArea = document.getElementById('result-area');
        resultArea.classList.remove('hidden', 'bg-green-100', 'text-green-800', 'bg-yellow-100', 'text-yellow-800');

        if (score === total) {
          resultArea.classList.add('bg-green-100', 'text-green-800');
          resultArea.innerHTML = `<strong>Tuy·ªát v·ªùi!</strong> B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${score}/${total} c√¢u.`;
        } else {
          resultArea.classList.add('bg-yellow-100', 'text-yellow-800');
          resultArea.innerHTML = `<strong>C·ªë l√™n!</strong> B·∫°n ƒë√£ ƒë√∫ng ${score}/${total} c√¢u. H√£y xem l·∫°i l√Ω thuy·∫øt nh√©.`;
        }
      },

      // =========================
      // AI: Generate quiz via /api/generate-quiz
      // =========================
      async generateAIQuiz(topicId) {
        const topic = topics.find(t => t.id === topicId);
        const status = document.getElementById('ai-status');

        const setStatus = (type, msg) => {
          status.classList.remove(
            'hidden',
            'bg-yellow-100', 'text-yellow-800',
            'bg-red-100', 'text-red-800',
            'bg-green-100', 'text-green-800'
          );
          if (type === 'loading') status.classList.add('bg-yellow-100', 'text-yellow-800');
          if (type === 'error') status.classList.add('bg-red-100', 'text-red-800');
          if (type === 'success') status.classList.add('bg-green-100', 'text-green-800');
          status.innerHTML = msg;
        };

        try {
          setStatus('loading', '‚è≥ ƒêang t·∫°o b√†i t·∫≠p b·∫±ng AI...');

          const res = await fetch('/api/generate-quiz', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              topicTitle: topic.title,
              level: topic.level,
              theorySummary: topic.theory.summary,
              points: topic.theory.points,
              numQuestions: 5
            })
          });

          if (!res.ok) {
            const errText = await res.text();
            throw new Error(errText || `HTTP ${res.status}`);
          }

          const data = await res.json();
          if (!data?.quiz?.length) throw new Error('AI kh√¥ng tr·∫£ v·ªÅ quiz h·ª£p l·ªá.');

          topic.quiz = data.quiz;
          this.switchTab('practice', topicId);

          const newStatus = document.getElementById('ai-status');
          if (newStatus) {
            newStatus.classList.remove('hidden');
            newStatus.classList.add('bg-green-100', 'text-green-800');
            newStatus.innerHTML = `‚úÖ ƒê√£ t·∫°o ${data.quiz.length} c√¢u m·ªõi cho: <strong>${topic.title}</strong>`;
          }

        } catch (e) {
          setStatus('error', `‚ùå L·ªói t·∫°o b√†i t·∫≠p AI: ${e.message}`);
        }
      }
    };

    document.addEventListener('DOMContentLoaded', () => app.init());
  </script>
</body>
</html>
